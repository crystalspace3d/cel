<world>
    <textures>
        <texture name="abstract_a032.jpg">
            <file>/lib/stdtex/bricks.jpg</file>
        </texture>
        <texture name="andrew_wood.jpg">
            <file>/lib/stdtex/my_wood.jpg</file>
        </texture>
        <texture name="chair">
	    <file>/this/data/objects/chair5.gif</file>
        </texture>
        <texture name="desk">
	    <file>/this/data/objects/desk.png</file>
	    <transparent red="1" green="1" blue="1" />
        </texture>
        <texture name="lamp_desk">
	    <file>/this/data/objects/lamp_desk.png</file>
	    <transparent red="1" green="1" blue="1" />
        </texture>
        <texture name="lamp_table">
	    <file>/this/data/objects/lamp_table2.gif</file>
	    <transparent red="1" green="1" blue="1" />
        </texture>
        <texture name="table_coffee">
	    <file>/this/data/objects/table_coffee5.gif</file>
	    <transparent red="1" green="1" blue="1" />
        </texture>
    </textures>
    <materials>
        <material name="wood"> <texture>andrew_wood.jpg</texture> </material>
        <material name="abstract"> <texture>abstract_a032.jpg</texture> </material>
	<material name="chair"> <texture>chair</texture> </material>
	<material name="desk"> <texture>desk</texture> </material>
	<material name="lamp_desk"> <texture>lamp_desk</texture> </material>
	<material name="lamp_table"> <texture>lamp_table</texture> </material>
	<material name="table_coffee"> <texture>table_coffee</texture> </material>
    </materials>
    <plugins>
        <plugin name="thing">crystalspace.mesh.loader.thing</plugin>
	<plugin name="spr3d">crystalspace.mesh.loader.sprite.3d</plugin>
        <plugin name="celentity">cel.addons.celentity</plugin>
        <plugin name="xmlscripts">cel.addons.xmlscripts</plugin>
    </plugins>

    <addon plugin="xmlscripts">
        <pcfactory>cel.pcfactory.mesh</pcfactory>
        <pcfactory>cel.pcfactory.solid</pcfactory>
        <pcfactory>cel.pcfactory.gravity</pcfactory>
        <pcfactory>cel.pcfactory.movable</pcfactory>
        <pcfactory>cel.pcfactory.billboard</pcfactory>
        <pcfactory>cel.pcfactory.properties</pcfactory>
        <script name="box">
	    <event name="init">
	        <property propclass="pcgravity" name="pcgravity.weight"
			float="1" />
	        <action propclass="pcgravity"
			name="pcgravity.ApplyPermanentForce"
			params="0,-9.8,0" />
	    </event>
	    <event name="pctimer_start">
	    </event>
	</script>
        <script name="bb1">
	    <event name="init">
	        <property propclass="pcbillboard" name="pcbillboard.name"
			string="bb_wood" />
	        <property propclass="pcbillboard"
			name="pcbillboard.materialname"
			string="wood" />
	        <property propclass="pcbillboard" name="pcbillboard.clickable"
			bool="1" />
	        <property propclass="pcbillboard" name="pcbillboard.restack"
			bool="1" />
	    </event>
	    <event name="pcbillboard_select">
	    </event>
	</script>
        <script name="bb2">
	    <event name="init">
	        <property propclass="pcbillboard" name="pcbillboard.name"
			string="bb_abstract" />
	        <property propclass="pcbillboard"
			name="pcbillboard.materialname"
			string="abstract" />
	        <property propclass="pcbillboard" name="pcbillboard.movable"
			bool="1" />
	        <property propclass="pcbillboard" name="pcbillboard.restack"
			bool="1" />
	    </event>
	</script>
        <script name="bb3">
	    <event name="init">
	        <property propclass="pcbillboard" name="pcbillboard.name"
			string="bb_abstract_2" />
	        <property propclass="pcbillboard"
			name="pcbillboard.materialname"
			string="abstract" />
	        <property propclass="pcbillboard" name="pcbillboard.movable"
			bool="1" />
	        <property propclass="pcbillboard" name="pcbillboard.restack"
			bool="1" />
	    </event>
	</script>

        <script name="generic_object">
	</script>

        <script name="switch_size">
	    <event name="init">
	        <var name="normal" bool="1" />
	    </event>
	    <event name="makesmall">
	        <var name="normal" bool="0" />
		<print>makesmall</print>
	        <getproperty var="w" propclass="pcbillboard"
			name="pcbillboard.width" />
	        <getproperty var="h" propclass="pcbillboard"
			name="pcbillboard.height" />
	        <property propclass="pcbillboard" name="pcbillboard.width"
			long="30000" />
	        <property propclass="pcbillboard" name="pcbillboard.height"
			long="30000" />
	    </event>
	    <event name="makelarge">
	        <var name="normal" bool="1" />
		<print>makelarge</print>
	        <property propclass="pcbillboard" name="pcbillboard.width"
			var="w" />
	        <property propclass="pcbillboard" name="pcbillboard.height"
			var="h" />
	    </event>
	    <event name="pcbillboard_select">
	        <if var="normal" true="makesmall" false="makelarge" />
	    </event>
	</script>

        <script name="lamp">
	    <event name="init">
	        <var name="isinit" bool="0" />
	    </event>
	    <event name="findpc">
	        <getpropclass var="collidetest" entity="table_coffee"
			propclass="pcbillboard" />
	        <var name="isinit" bool="1" />
	    </event>
	    <event name="collide">
	        <property propclass="pcbillboard" name="pcbillboard.color"
			color="0,0,1" />
	    </event>
	    <event name="nocollide">
	        <property propclass="pcbillboard" name="pcbillboard.color"
			color="1,1,1" />
	    </event>
	    <event name="pcbillboard_move">
	        <if var="isinit" false="findpc" />
		<testcollide var="collidetest"
			true="collide"
			false="nocollide" />
	    </event>
	</script>
    </addon>

    <sector name="room">
        <meshobj name="room_walls_portal">
            <zfill />
            <plugin>thing</plugin>
            <params>
                <v x="-20" y="-1" z="-20" />
                <v x="-20" y="-1" z="20" />
                <v x="20" y="-1" z="20" />
                <v x="20" y="-1" z="-20" />
                <v x="-20" y="5" z="-20" />
                <v x="-20" y="5" z="20" />
                <v x="20" y="5" z="20" />
                <v x="20" y="5" z="-20" />
                <v x="-20" y="-1" z="-1" />
                <v x="-20" y="-1" z="1" />
                <v x="-1" y="-1" z="20" />
                <v x="1" y="-1" z="20" />
                <v x="20" y="-1" z="1" />
                <v x="20" y="-1" z="-1" />
                <v x="1" y="-1" z="-20" />
                <v x="-1" y="-1" z="-20" />
                <v x="-20" y="5" z="-1" />
                <v x="-20" y="5" z="1" />
                <v x="-1" y="5" z="20" />
                <v x="1" y="5" z="20" />
                <v x="20" y="5" z="1" />
                <v x="20" y="5" z="-1" />
                <v x="1" y="5" z="-20" />
                <v x="-1" y="5" z="-20" />
                <material>abstract</material>
                <texlen>5</texlen>
                <cosfact>0.8</cosfact>
                <p name="front1">
                    <v>5</v>
                    <v>18</v>
                    <v>10</v>
                    <v>1</v>
                </p>
                <p name="front2_portal">
                    <v>18</v>
                    <v>19</v>
                    <v>11</v>
                    <v>10</v>
                </p>
            </params>
        </meshobj>
        <meshobj name="room_walls">
            <zfill />
            <plugin>thing</plugin>
            <params>
                <v x="-20" y="-1" z="-20" />
                <v x="-20" y="-1" z="20" />
                <v x="20" y="-1" z="20" />
                <v x="20" y="-1" z="-20" />
                <v x="-20" y="5" z="-20" />
                <v x="-20" y="5" z="20" />
                <v x="20" y="5" z="20" />
                <v x="20" y="5" z="-20" />
                <v x="-20" y="-1" z="-1" />
                <v x="-20" y="-1" z="1" />
                <v x="-1" y="-1" z="20" />
                <v x="1" y="-1" z="20" />
                <v x="20" y="-1" z="1" />
                <v x="20" y="-1" z="-1" />
                <v x="1" y="-1" z="-20" />
                <v x="-1" y="-1" z="-20" />
                <v x="-20" y="5" z="-1" />
                <v x="-20" y="5" z="1" />
                <v x="-1" y="5" z="20" />
                <v x="1" y="5" z="20" />
                <v x="20" y="5" z="1" />
                <v x="20" y="5" z="-1" />
                <v x="1" y="5" z="-20" />
                <v x="-1" y="5" z="-20" />
                <material>abstract</material>
                <texlen>5</texlen>
                <cosfact>0.8</cosfact>
                <p name="down1">
                    <v>0</v>
                    <v>1</v>
                    <v>10</v>
                    <v>15</v>
                    <material>wood</material>
                    <texmap>
                        <orig x="0" y="-1" z="0" />
                        <first x="1" y="-1" z="0" />
                        <firstlen>5</firstlen>
                        <second x="0" y="-1" z="1" />
                        <secondlen>5</secondlen>
                    </texmap>
                </p>
                <p name="down2">
                    <v>15</v>
                    <v>10</v>
                    <v>11</v>
                    <v>14</v>
                    <material>wood</material>
                    <texmap>
                        <orig x="0" y="-1" z="0" />
                        <first x="1" y="-1" z="0" />
                        <firstlen>5</firstlen>
                        <second x="0" y="-1" z="1" />
                        <secondlen>5</secondlen>
                    </texmap>
                </p>
                <p name="down3">
                    <v>14</v>
                    <v>11</v>
                    <v>2</v>
                    <v>3</v>
                    <material>wood</material>
                    <texmap>
                        <orig x="0" y="-1" z="0" />
                        <first x="1" y="-1" z="0" />
                        <firstlen>5</firstlen>
                        <second x="0" y="-1" z="1" />
                        <secondlen>5</secondlen>
                    </texmap>
                </p>
                <p name="up1">
                    <v>5</v>
                    <v>4</v>
                    <v>23</v>
                    <v>18</v>
                    <material>wood</material>
                    <texmap>
                        <orig x="0" y="5" z="0" />
                        <first x="1" y="5" z="0" />
                        <firstlen>5</firstlen>
                        <second x="0" y="5" z="1" />
                        <secondlen>5</secondlen>
                    </texmap>
                </p>
                <p name="up2">
                    <v>18</v>
                    <v>23</v>
                    <v>22</v>
                    <v>19</v>
                    <material>wood</material>
                    <texmap>
                        <orig x="0" y="5" z="0" />
                        <first x="1" y="5" z="0" />
                        <firstlen>5</firstlen>
                        <second x="0" y="5" z="1" />
                        <secondlen>5</secondlen>
                    </texmap>
                </p>
                <p name="up3">
                    <v>19</v>
                    <v>22</v>
                    <v>7</v>
                    <v>6</v>
                    <material>wood</material>
                    <texmap>
                        <orig x="0" y="5" z="0" />
                        <first x="1" y="5" z="0" />
                        <firstlen>5</firstlen>
                        <second x="0" y="5" z="1" />
                        <secondlen>5</secondlen>
                    </texmap>
                </p>
                <p name="front3">
                    <v>19</v>
                    <v>6</v>
                    <v>2</v>
                    <v>11</v>
                </p>
                <p name="back1">
                    <v>7</v>
                    <v>22</v>
                    <v>14</v>
                    <v>3</v>
                </p>
                <p name="back2">
                    <v>22</v>
                    <v>23</v>
                    <v>15</v>
                    <v>14</v>
                </p>
                <p name="back3">
                    <v>23</v>
                    <v>4</v>
                    <v>0</v>
                    <v>15</v>
                </p>
                <p name="right1">
                    <v>6</v>
                    <v>20</v>
                    <v>12</v>
                    <v>2</v>
                </p>
                <p name="right2">
                    <v>20</v>
                    <v>21</v>
                    <v>13</v>
                    <v>12</v>
                </p>
                <p name="right3">
                    <v>21</v>
                    <v>7</v>
                    <v>3</v>
                    <v>13</v>
                </p>
                <p name="left1">
                    <v>4</v>
                    <v>16</v>
                    <v>8</v>
                    <v>0</v>
                </p>
                <p name="left2">
                    <v>16</v>
                    <v>17</v>
                    <v>9</v>
                    <v>8</v>
                </p>
                <p name="left3">
                    <v>17</v>
                    <v>5</v>
                    <v>1</v>
                    <v>9</v>
                </p>
            </params>
        </meshobj>
	<meshobj name="box">
	    <file>/this/data/box</file>
	    <plugin>spr3d</plugin>
	    <params>
	        <factory>box</factory>
		<action>default</action>
	    </params>
	    <move>
	        <v x="2" y="2" z="5" />
	    </move>
	    <zuse />
	    <priority>object</priority>
	    <addon plugin="celentity">
		<propclass name="pcsolid" />
		<propclass name="pcgravity" />
		<propclass name="pcmovable" />
	        <behaviour name="box" />
	    </addon>
	</meshobj>

	<addon plugin="celentity">
	    <propclass name="pcbillboard" />
            <behaviour name="bb1" />
	</addon>
	<addon plugin="celentity" entityname="a1">
	    <propclass name="pcbillboard" />
            <behaviour name="bb2" />
	</addon>
	<addon plugin="celentity" entityname="a1">
	    <propclass name="pcbillboard" />
            <behaviour name="bb2" />
	</addon>
	<addon plugin="celentity" entityname="a3">
	    <propclass name="pcbillboard" />
            <behaviour name="bb2" />
	</addon>
	<addon plugin="celentity" entityname="a4">
	    <propclass name="pcbillboard" />
            <behaviour name="bb2" />
	</addon>
	<addon plugin="celentity">
	    <propclass name="pcbillboard" />
            <behaviour name="bb3" />
	</addon>
	<addon plugin="celentity" entityname="chair">
	    <propclass name="pcbillboard">
	        <property name="pcbillboard.name" string="chair" />
	        <property name="pcbillboard.materialname" string="chair" />
	        <property name="pcbillboard.clickable" bool="1" />
	        <property name="pcbillboard.movable" bool="1" />
	        <property name="pcbillboard.restack" bool="1" />
		<property name="pcbillboard.color" color="1,0,0" />
	        <property name="pcbillboard.widthpct" float=".7" />
	        <property name="pcbillboard.heightpct" float=".7" />
	    </propclass>
            <behaviour name="switch_size" />
	</addon>
	<addon plugin="celentity" entityname="desk">
	    <propclass name="pcbillboard">
	        <property name="pcbillboard.name" string="desk" />
	        <property name="pcbillboard.materialname" string="desk" />
	        <property name="pcbillboard.movable" bool="1" />
	        <property name="pcbillboard.restack" bool="1" />
	    </propclass>
            <behaviour name="generic_object" />
	</addon>
	<addon plugin="celentity" entityname="lamp_desk">
	    <propclass name="pcbillboard">
	        <property name="pcbillboard.name" string="lamp_desk" />
	        <property name="pcbillboard.materialname" string="lamp_desk" />
	        <property name="pcbillboard.movable" bool="1" />
	        <property name="pcbillboard.clickable" bool="1" />
	        <property name="pcbillboard.restack" bool="1" />
	        <property name="pcbillboard.widthpct" float=".40" />
	        <property name="pcbillboard.heightpct" float=".40" />
	        <property name="pcbillboard.x" long="160000" />
	        <property name="pcbillboard.y" long="160000" />
	    </propclass>
            <behaviour name="lamp" />
	</addon>
	<addon plugin="celentity" entityname="lamp_table">
	    <propclass name="pcbillboard">
	        <property name="pcbillboard.name" string="lamp_table" />
	        <property name="pcbillboard.materialname" string="lamp_table" />
	        <property name="pcbillboard.movable" bool="1" />
	        <property name="pcbillboard.clickable" bool="1" />
	        <property name="pcbillboard.restack" bool="1" />
	        <property name="pcbillboard.widthpct" float=".40" />
	        <property name="pcbillboard.heightpct" float=".40" />
	    </propclass>
            <behaviour name="lamp" />
	</addon>
	<addon plugin="celentity" entityname="table_coffee">
	    <propclass name="pcbillboard">
	        <property name="pcbillboard.name" string="table_coffee" />
	        <property name="pcbillboard.materialname" string="table_coffee" />
	        <property name="pcbillboard.movable" bool="1" />
	        <property name="pcbillboard.restack" bool="1" />
	    </propclass>
            <behaviour name="generic_object" />
	</addon>

        <light>
            <center x="0" y="0" z="0" />
            <radius>40</radius>
            <color red="1" green="1" blue="1" />
        </light>
    </sector>
</world>

