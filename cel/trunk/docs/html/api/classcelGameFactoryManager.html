<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CEL: Crystal Entity Layer: celGameFactoryManager Class Reference (CEL: Crystal Entity Layer Public API Reference)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="head">
 <tr heigth="59">
  <td class="head" width="202" valign="bottom" style="padding-left:0;"><a href="http://cel.crystalspace3d.org/"><img src="celblur.png" width="210" height="59" alt="CEL" border="0"></a></td>
  <td class="head"><h2>Public API Reference</h2></td>
 </tr>
 <tr heigth="11">
  <td colspan="2" class="headshadow" valign="top" style="padding-left:0;"><img src="celshadow.png" width="9" height="11" alt="" border="0"></td>
 </tr>
</table>
<div class="content">
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>celGameFactoryManager Class Reference</h1><!-- doxytag: class="celGameFactoryManager" -->This is an interface you should implement in order to manage the events from the factory of game sessions.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="network_8h-source.html">physicallayer/network.h</a>&gt;</code>
<p>
<a href="classcelGameFactoryManager-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcelGameFactoryManager.html#a0">GameInfoReceived</a> (<a class="el" href="classcelGameInfo.html">celGameInfo</a> *game_info, csTicks server_latency)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The game factory is searching for available games (it has been started with <a class="el" href="structiCelGameFactory.html#a5">iCelGameFactory::StartSearchForGameList</a>), and a game has been found.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcelGameFactoryManager.html#a1">ServerNetworkStateChanged</a> (celServerNetworkState new_state, celServerNetworkState previous_state, csString reason=&quot;&quot;)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The state of the network connection from the client to the server has changed.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcelGameFactoryManager.html#a2">InitClient</a> (<a class="el" href="structiCelGame.html">iCelGame</a> *game)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A client is created and has to be initialized.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcelGameFactoryManager.html#a3">InitServer</a> (<a class="el" href="structiCelGame.html">iCelGame</a> *game)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A server is created and has to be initialized.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual csPtr&lt; <a class="el" href="structiCelDataBuffer.html">iCelDataBuffer</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcelGameFactoryManager.html#a4">GetClientEventBaseline</a> (celClientEventType event_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the baseline of a client event.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual csPtr&lt; <a class="el" href="structiCelDataBuffer.html">iCelDataBuffer</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcelGameFactoryManager.html#a5">GetServerEventBaseline</a> (celServerEventType event_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the baseline of a server event.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual csPtr&lt; <a class="el" href="structiCelDataBuffer.html">iCelDataBuffer</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcelGameFactoryManager.html#a6">GetNetworkLinkBaseline</a> (celNetworkLinkType link_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the baseline of a network link.  <a href="#a6"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is an interface you should implement in order to manage the events from the factory of game sessions. 
<p>
You can use it to: <ul>
<li>
receive the information on new games accessible. </li>
<li>
catch the changes of the connection state from the client to the server. </li>
<li>
initialize the client and the server. </li>
<li>
provide the baselines of the client and server events, and of the network links. </li>
</ul>

<p>

<p>
Definition at line <a class="el" href="network_8h-source.html#l00240">240</a> of file <a class="el" href="network_8h-source.html">network.h</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a0"></a><!-- doxytag: member="celGameFactoryManager::GameInfoReceived" ref="a0" args="(celGameInfo *game_info, csTicks server_latency)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void celGameFactoryManager::GameInfoReceived           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classcelGameInfo.html">celGameInfo</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>game_info</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>csTicks&nbsp;</td>
          <td class="mdname" nowrap> <em>server_latency</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The game factory is searching for available games (it has been started with <a class="el" href="structiCelGameFactory.html#a5">iCelGameFactory::StartSearchForGameList</a>), and a game has been found. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>game_info</em>&nbsp;</td><td>the info of the game. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>server_latency</em>&nbsp;</td><td>an estimation of the latency of the network connection from this client to the server.</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="network_8h-source.html#l00251">251</a> of file <a class="el" href="network_8h-source.html">network.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4"></a><!-- doxytag: member="celGameFactoryManager::GetClientEventBaseline" ref="a4" args="(celClientEventType event_type)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual csPtr&lt;<a class="el" href="structiCelDataBuffer.html">iCelDataBuffer</a>&gt; celGameFactoryManager::GetClientEventBaseline           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">celClientEventType&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>event_type</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the baseline of a client event. 
<p>
Baselines are the default types and values of the fields of an event. They are used to limit the network traffic by delta-compression and by allowing the system to not be forced to send the types of the data. <p>
It is not obligatory to provide the baselines and this function can return 0, but this can result in some network overhead.
<p>
Definition at line <a class="el" href="network_8h-source.html#l00304">304</a> of file <a class="el" href="network_8h-source.html">network.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6"></a><!-- doxytag: member="celGameFactoryManager::GetNetworkLinkBaseline" ref="a6" args="(celNetworkLinkType link_type)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual csPtr&lt;<a class="el" href="structiCelDataBuffer.html">iCelDataBuffer</a>&gt; celGameFactoryManager::GetNetworkLinkBaseline           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">celNetworkLinkType&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>link_type</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the baseline of a network link. 
<p>
It is not obligatory to provide the baselines and this function can return 0, but this can result in some network overhead.
<p>
Definition at line <a class="el" href="network_8h-source.html#l00320">320</a> of file <a class="el" href="network_8h-source.html">network.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5"></a><!-- doxytag: member="celGameFactoryManager::GetServerEventBaseline" ref="a5" args="(celServerEventType event_type)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual csPtr&lt;<a class="el" href="structiCelDataBuffer.html">iCelDataBuffer</a>&gt; celGameFactoryManager::GetServerEventBaseline           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">celServerEventType&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>event_type</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the baseline of a server event. 
<p>
It is not obligatory to provide the baselines and this function can return 0, but this can result in some network overhead.
<p>
Definition at line <a class="el" href="network_8h-source.html#l00312">312</a> of file <a class="el" href="network_8h-source.html">network.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2"></a><!-- doxytag: member="celGameFactoryManager::InitClient" ref="a2" args="(iCelGame *game)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual bool celGameFactoryManager::InitClient           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structiCelGame.html">iCelGame</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>game</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A client is created and has to be initialized. 
<p>
The <a class="el" href="structiCelGameClient.html">iCelGameClient</a> object is accessible from the <a class="el" href="structiCelGame.html">iCelGame</a> object. <p>
You should create here a physical layer which will be the copy of the physical layer of the server. You should wait for network links from the server before adding most entities, but you can start loading the level, ie the static entities. If the type of the game is CEL_NET_SINGLEPLAYER, you do not need to create a physical layer and you can access directly the one from the server. <p>
You should register here the client manager.
<p>
Definition at line <a class="el" href="network_8h-source.html#l00285">285</a> of file <a class="el" href="network_8h-source.html">network.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3"></a><!-- doxytag: member="celGameFactoryManager::InitServer" ref="a3" args="(iCelGame *game)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual bool celGameFactoryManager::InitServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structiCelGame.html">iCelGame</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>game</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A server is created and has to be initialized. 
<p>
The <a class="el" href="structiCelGameServer.html">iCelGameServer</a> object is accessible from the celGame object. <p>
You should create here the physical layer, the initial entities and their behaviors. <p>
You should register here the server manager.
<p>
Definition at line <a class="el" href="network_8h-source.html#l00294">294</a> of file <a class="el" href="network_8h-source.html">network.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1"></a><!-- doxytag: member="celGameFactoryManager::ServerNetworkStateChanged" ref="a1" args="(celServerNetworkState new_state, celServerNetworkState previous_state, csString reason=&quot;&quot;)=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void celGameFactoryManager::ServerNetworkStateChanged           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">celServerNetworkState&nbsp;</td>
          <td class="mdname" nowrap> <em>new_state</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>celServerNetworkState&nbsp;</td>
          <td class="mdname" nowrap> <em>previous_state</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>csString&nbsp;</td>
          <td class="mdname" nowrap> <em>reason</em> = <code>&quot;&quot;</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The state of the network connection from the client to the server has changed. 
<p>
An extra comment can be specified when new_state is: <ul>
<li>
CEL_NET_SERVER_INVALID_HOSTNAME: reason is the value of the hostname. </li>
<li>
CEL_NET_SERVER_REJECTED_BAD_GAME: reason is the name of the game played by the server. </li>
<li>
CEL_NET_SERVER_REJECTED_BAD_PROTOCOL: reason is the name of the protocol version used by the server. </li>
<li>
CEL_NET_SERVER_REJECTED_UNAUTHORIZED: reason is the text given by the server to explain why this player has not been authorized to enter the game. </li>
<li>
CEL_NET_SERVER_KICKED: reason is the text given by the server to explain why this player has been kicked from the game. </li>
</ul>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>physicallayer/<a class="el" href="network_8h-source.html">network.h</a></ul>
<hr size="1"><address><small>Generated for CEL: Crystal Entity Layer by 
<a href="http://www.doxygen.org/index.html">doxygen</a> 1.4.4 
</small></address> </div></body> </html>
