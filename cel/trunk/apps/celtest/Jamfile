SubDir TOP apps celtest ;

Application celtst : [ Wildcard *.cpp *.h ] ;
CFlags celtst : "-DLIBDIR='\"$(INSTALLDIR.PLUGIN)/\"'" ;
LinkWith celtst : celtool ;
ExternalLibs celtst : CRYSTAL ;

if $(HAVE_STATIC_PLUGINS) = "yes"
{
  SubVariant static ;
  
  Application celtst_static : [ Wildcard *.cpp *.h ] ;
  CFlags celtst_static : [ FDefines CS_STATIC_LINKED ] ;
  LFlags celtst_static : -lcrystalspace_staticplugins ;
  LinkWith celtst_static : cel_staticplugins celtool ;
  LinkStaticPlugins celtst_static :
    addon_celentity
    addon_questdef
    bltest
    mgr_quests
    pfactormove
    pfdefcam
    pfinput
    pfinv
    pfengine
    pfmesh
    pfmove
    pfquest
    pftest
    pftools
    pftrigger
    stdphyslayer
    xmlpersist
  : blpython
  ;
  LinkStaticPlugins celtst_static : 
    ball
    ballldr
    bezier
    bezierldr
    bugplug
    csconin
    csddsimg
    csfont
    csgifimg
    csjpgimg
    csparser
    cspngimg
    cssynldr
    dynavis
    emit
    emitldr
    engine
    engseq
    explo
    exploldr
    fire
    fireldr
    fontplex
    fountain
    fountldr
    frustvis
    genmesh
    gl3d 
    glshader_arb 
    glshader_fixed
    gmeshanim
    gmeshldr
    gmeshskelanim
    haze
    hazeldr
    ieplex
    imgplex
    nullmesh
    opcode
    protomesh
    protomeshldr
    rain
    rainldr
    rendloop_loader
    rendstep_std
    reporter
    sequence
    shadermgr
    simpcon
    simpleformer
    simpleformerldr
    snow
    snowldr
    spiral
    spirldr
    spr2d
    spr2dldr
    spr3d
    spr3dldr
    sprcal3d 
    sprcal3dldr
    starldr
    stars
    stdpt
    stdrep
    thing
    thingldr
    vfs
    xmlread
    xmlshader
  : glwin32 glx2d glosx2d xwin
  : CRYSTAL
  ;
  ExternalLibs celtst_static : CRYSTAL ;
  
  SubVariant ;
}
