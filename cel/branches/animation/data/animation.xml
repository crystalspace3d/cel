<animation>
  <node name="actions" type="actions">
    <parameter name="active" string="upright" />
    <parameter name="inactive" string="punch" />
    <parameter name="mixtime" float="1000" />

    <node name="upright" type="switcher">
      <parameter name="crosstime" float="1000" />
      <parameter name="state" string="stand" />

      <node name="walk" type="animation">
        <parameter name="animation" string="walk" />
        <parameter name="loop" bool="true" />

        <condition type="property">
          <parameter name="name" string="cel.property.currspeed" />
          <parameter name="propclass" string="pcmove.linear" />
          <parameter name="max" float="1" />

          <result type="transition">
            <parameter name="node" string="upright" />
            <parameter name="state" string="stand" />
          </result>
        </condition>
      </node>
      <node name="stand" type="animation">
        <parameter name="animation" string="stand" />
        <parameter name="loop" bool="true" />

        <condition type="property">
          <parameter name="name" string="cel.property.currspeed" />
          <parameter name="propclass" string="pcmove.linear" />
          <parameter name="min" float="7" />

          <result type="transition">
            <parameter name="node" string="upright" />
            <parameter name="state" string="walk" />
          </result>
        </condition>
      </node>
    </node>

    <node name="punch" type="animation">
      <parameter name="animation" string="punch" />

      <!--<condition type="animationfinish">
        <parameter name="name" string="punch" />
        <result type="resetanimation">
          <parameter name="name" string="punch" />
        </result>
      </condition>-->
    </node>

    <condition type="property">
      <parameter name="name" string="curraction" />
      <parameter name="matches" string="punch" />

      <result type="transition">
        <parameter name="node" string="actions" />
        <parameter name="state" string="punch" />
      </result>
      <result type="setproperty">
        <parameter name="name" string="curraction" />
        <parameter name="value" string="none" />
      </result>
    </condition>
  </node>
</animation>
